from .enums import ExportFormat, ExportFilter, InstrPredicate, CDFGStage
from .types import RegisterClass

# TODO: rename result to sub & gen
# TODO: actually implement filters
WRITE_QUERIES = True
WRITE_QUERY_METRICS = True
WRITE_FUNC = True
WRITE_FUNC_FMT = ExportFormat.DOT | ExportFormat.PKL
# FUNC_FLT = ExportFilter.SELECTED
# SUB_FMT = ExportFormat.DOT  # | ExportFormat.PDF | ExportFormat.PNG
# SUB_FMT = ExportFormat.DOT | ExportFormat.PKL  # | ExportFormat.PNG | ExportFormat.PDF
WRITE_SUB = True
WRITE_SUB_FMT = ExportFormat.DOT | ExportFormat.PKL | ExportFormat.PDF
WRITE_SUB_FLT = ExportFilter.SELECTED
# SUB_FLT = ExportFilter.ALL
# IO_SUB_FMT = ExportFormat.DOT | ExportFormat.PKL  # | ExportFormat.PNG | ExportFormat.PDF
WRITE_IO_SUB = True
WRITE_IO_SUB_FMT = ExportFormat.DOT | ExportFormat.PKL | ExportFormat.PDF
WRITE_IO_SUB_FLT = ExportFilter.SELECTED
# TODO: move Tree tro pre-gen
WRITE_TREE = True
WRITE_TREE_FMT = ExportFormat.TXT | ExportFormat.PKL | ExportFormat.DOT | ExportFormat.PDF
WRITE_TREE_FLT = ExportFilter.SELECTED
# GEN_FMT = ExportFormat.CDSL | ExportFormat.MIR | ExportFormat.FLAT
WRITE_GEN = True
WRITE_GEN_FMT = ExportFormat.FLAT | ExportFormat.CDSL
WRITE_GEN_FLT = ExportFilter.SELECTED
WRITE_PIE = True
WRITE_PIE_FMT = ExportFormat.PDF | ExportFormat.CSV | ExportFormat.PNG
WRITE_PIE_FLT = ExportFilter.ALL
WRITE_SANKEY = True
WRITE_SANKEY_FMT = ExportFormat.MARKDOWN
WRITE_SANKEY_FLT = ExportFilter.ALL & ~ExportFilter.ISO
WRITE_DF = True
WRITE_DF_FMT = ExportFormat.CSV | ExportFormat.PKL
WRITE_DF_FLT = ExportFilter.ALL
WRITE_INDEX = True
WRITE_INDEX_FMT = ExportFormat.YAML
WRITE_INDEX_FLT = ExportFilter.SELECTED
WRITE_HDF5 = False
WRITE_HDF5_FLT = ExportFilter.SELECTED | ExportFilter.FILTERED_WEIGHTS | ExportFilter.ERROR | ExportFilter.INVALID
READ_HDF5 = False
READ_HDF5_FLT = ExportFilter.SELECTED
INSTR_PREDICATES = InstrPredicate.ALL
ALLOWED_REG_CLASSES = RegisterClass.GPR | RegisterClass.UNKNOWN  # TODO: support FPR & CSR?
# IGNORE_NAMES = ["G_PHI", "PHI", "COPY", "PseudoCALLIndirect", "PseudoLGA", "Select_GPR_Using_CC_GPR"]
IGNORE_NAMES = ["G_PHI", "PHI", "COPY", "PseudoCALLIndirect", "PseudoLGA", "Select_GPR_Using_CC_GPR", "LUI", "PseudoMovAddr"]
IGNORE_OP_TYPES = ["input", "constant", "label"]  # TODO: allow_label? (handle frame_index for stack?)
ALLOWED_ENC_SIZES = [32]
STAGE = CDFGStage.STAGE_3
MAX_ENC_FOOTPRINT = 1.0
MAX_ENC_WEIGHT = 1.0
MIN_ENC_BITS_LEFT = 5
MIN_ISO_WEIGHT = 0.05
MAX_LOADS = 1
MAX_STORES = 1
MAX_MEMS = 1
MAX_BRANCHES = 1
ALLOWED_IMM_WIDTHS = [5, 12]
MAX_OPERANDS = 5
MAX_REG_OPERANDS = 5
MAX_IMM_OPERANDS = 2
SESSION = "default"
FUNC = None
BB = None
MAXMISOS = None
LIMIT_RESULTS = None
MIN_PATH_LENGTH = 1
MAX_PATH_LENGTH = 3
MAX_PATH_WIDTH = 2
IGNORE_CONST_INPUTS = False
HOST = "localhost"
PORT = 7687
MIN_INPUTS = 0
MAX_INPUTS = 3
MIN_OUTPUTS = 0
MAX_OUTPUTS = 2
MAX_IN_OPERANDS = 3
MAX_OUT_OPERANDS = 2
MAX_INOUT_OPERANDS = 2
MAX_NODES = 5
MIN_NODES = 1
# TODO: MIN_FREQ, MIN_WEIGHT, MAX_INSTRS, MAX_UNIQUE_INSTRS
HALT_ON_ERROR = True
UNTIL = None
XLEN = 32
FUNCTION = None
BASIC_BLOCK = None
ENABLE_VARIATION_REUSE_IO = False
ENABLE_VARIATION_AUTO_IMM = False
